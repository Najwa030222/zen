<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE ZEN | Register Class</title>
    <link rel="icon" type="image/png" href="images/favicon.png">
    
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        /* Core layout utilizing Flexbox for vertical footer positioning */
        body { 
            background: linear-gradient(rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.9)), url('images/registerclassbackground.jpg'); 
            background-size: cover; background-attachment: fixed; min-height: 100vh; color: white;
            font-family: 'Segoe UI', sans-serif;
            display: flex;
            flex-direction: column;
        }

        /* Nav styling */
        .zen-nav { background: #000; border-bottom: 1px solid rgba(255,255,255,0.1); }
        
        /* Glassmorphism UI effect */
        .glass-card { 
            background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); 
            border: 1px solid rgba(255, 255, 255, 0.1); border-radius: 20px; transition: 0.3s;
            overflow: hidden; height: 100%;
        }

        /* Interactive hover */
        .glass-card:hover { transform: translateY(-5px); border-color: #f5f5dc; }

        .text-beige { color: #f5f5dc !important; }
        
        /* Headers fors weekly view */
        .day-header { border-left: 4px solid #f5f5dc; padding-left: 15px; margin: 40px 0 20px; color: #f5f5dc; }

        /* Book button */
        .btn-zen {
            background-color: #f5f5dc; color: #1a1a1a; font-weight: bold;
            border-radius: 50px; transition: 0.4s; border: none; padding: 8px 20px;
            font-size: 0.9rem;
        }

        .btn-zen:hover { background-color: #ffffff; box-shadow: 0 5px 15px rgba(245, 245, 220, 0.3); }
        
        /* Button for states where a class is already booked */
        .btn-zen:disabled { background-color: rgba(255,255,255,0.2); color: white; cursor: default; }

        /* Notification bar for success messaging */
        .zen-toast {
            position: fixed; top: 0; left: 0; width: 100%; background: #f5f5dc; color: #1a1a1a;
            padding: 12px 0; text-align: center; box-shadow: 0 4px 15px rgba(0,0,0,0.3);
            display: none; z-index: 3000; font-weight: 600; letter-spacing: 1px;
            text-transform: uppercase; font-size: 0.85rem; animation: dropDown 0.4s ease-out;
        }

        @keyframes dropDown { from { transform: translateY(-100%); } to { transform: translateY(0); } }

        /* Footer styling */
        footer { border-top: 1px solid rgba(255, 255, 255, 0.05); background: rgba(0, 0, 0, 0.2); margin-top: auto; }
        .hover-beige:hover { color: #f5f5dc !important; transition: 0.3s ease; }
        .social-icons a { transition: transform 0.3s ease, color 0.3s ease; display: inline-block; }
        .social-icons a:hover { transform: translateY(-5px); }
    </style>
</head>
<body>

<div id="zenNotification" class="zen-toast">
    <i class="fa-solid fa-leaf me-2"></i> <span id="toastMessage">Journey Updated</span>
</div>

<nav class="navbar navbar-expand-lg navbar-dark zen-nav shadow-sm sticky-top">
    <div class="container">
        <a class="navbar-brand" href="dashboard.html">
            <img src="images/thezenlogo.png" alt="Logo" style="height: 40px;">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#zenNav">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="zenNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item"><a href="dashboard.html" class="nav-link text-white">Dashboard</a></li>
                <li class="nav-item"><a href="register_class.html" class="nav-link text-white fw-bold">Register Class</a></li>
                <li class="nav-item"><a href="trainers.html" class="nav-link text-white">Trainers</a></li>
                <li class="nav-item ms-lg-3 mt-2 mt-lg-0">
                    <button onclick="logout()" class="btn btn-sm btn-outline-danger rounded-pill px-4">Logout</button>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container pb-5 pt-5 mt-4">
    <div class="text-center mb-5">
        <h2 class="fw-bold">Weekly Practice Schedule</h2>
        <p class="text-white-50">Choose a session to add to your journey.</p>
    </div>

    <div id="scheduleContainer"></div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
    /* Session verification: ensures page access only for logged-in users */
    if (localStorage.getItem('isLoggedIn') !== 'true') { window.location.href = 'index.html'; }

    /* Schedule data organized by day */
    const schedule = {
        "Monday": [
            { id: 1, name: "Sunrise Hatha", instructor: "Master Ken", time: "07:00 AM" },
            { id: 2, name: "Noon Focus", instructor: "Elena Gilbert", time: "12:00 PM" },
            { id: 3, name: "Evening Flow", instructor: "Siti Sarah", time: "06:00 PM" }
        ],
        "Tuesday": [
            { id: 4, name: "Power Pilates", instructor: "Natasya Amelyn", time: "08:30 AM" },
            { id: 5, name: "Vinyasa Core", instructor: "Siti Sarah", time: "01:00 PM" },
            { id: 6, name: "Zen Meditation", instructor: "David Zhang", time: "07:30 PM" }
        ],
        "Wednesday": [
            { id: 7, name: "Morning Stretch", instructor: "Elena Gilbert", time: "07:30 AM" },
            { id: 8, name: "Pranayama Breath", instructor: "Master Ken", time: "11:00 AM" },
            { id: 9, name: "Ashtanga Intro", instructor: "Natasya Amelyn", time: "05:30 PM" }
        ],
        "Thursday": [
            { id: 10, name: "Balance Yoga", instructor: "Siti Sarah", time: "08:00 AM" },
            { id: 11, name: "Mindful Motion", instructor: "Elena Gilbert", time: "01:30 PM" },
            { id: 12, name: "Deep Sleep Zen", instructor: "David Zhang", time: "08:30 PM" }
        ],
        "Friday": [
            { id: 13, name: "Friday Flow", instructor: "Natasya Amelyn", time: "09:00 AM" },
            { id: 14, name: "Energy Boost", instructor: "Siti Sarah", time: "12:30 PM" },
            { id: 15, name: "Weekend Prep", instructor: "Elena Gilbert", time: "06:30 PM" }
        ],
        "Saturday": [
            { id: 16, name: "Nature Hatha", instructor: "Master Ken", time: "10:00 AM" },
            { id: 17, name: "Family Zen", instructor: "Siti Sarah", time: "02:00 PM" },
            { id: 18, name: "Full Moon Yoga", instructor: "Natasya Amelyn", time: "08:00 PM" }
        ]
    };

    /* Dynamically renders the schedule cards based on available data and user state */
    function loadSchedule() {
        const container = document.getElementById('scheduleContainer');
        const myClasses = JSON.parse(localStorage.getItem('zen_my_classes')) || [];
        container.innerHTML = "";

        for (const day in schedule) {
            let dayHtml = `<h3 class="day-header">${day}</h3><div class="row g-3">`;
            
            schedule[day].forEach(c => {
                /* Checking against LocalStorage to determine if the class is already booked */
                const isBooked = myClasses.some(my => my.id === c.id);
                dayHtml += `
                    <div class="col-md-4">
                        <div class="glass-card p-3 d-flex justify-content-between align-items-center">
                            <div>
                                <h6 class="text-beige mb-1">${c.name}</h6>
                                <small class="text-white-50 d-block">${c.time} | ${c.instructor}</small>
                            </div>
                            <button onclick="bookClass(${c.id}, '${c.name}', '${c.instructor}', '${c.time}', '${day}')" 
                                    class="btn btn-zen" ${isBooked ? 'disabled' : ''}>
                                ${isBooked ? 'Booked' : 'Book'}
                            </button>
                        </div>
                    </div>`;
            });
            dayHtml += `</div>`;
            container.innerHTML += dayHtml;
        }
    }

    /* Updates LocalStorage and provides UI feedback */
    function bookClass(id, className, instructor, time, day) {
        let myClasses = JSON.parse(localStorage.getItem('zen_my_classes')) || [];
        myClasses.push({ id, className: `${day}: ${className}`, instructor, time, status: 'Upcoming' });
        localStorage.setItem('zen_my_classes', JSON.stringify(myClasses));
        
        // Visual Notification Logic
        const toast = document.getElementById('zenNotification');
        const msg = document.getElementById('toastMessage');
        
        msg.innerText = `${className} added to your schedule`;
        toast.style.display = 'block';

        // Auto-hiding toast notification
        setTimeout(() => {
            toast.style.opacity = '0';
            toast.style.transition = 'opacity 0.5s ease';
            setTimeout(() => {
                toast.style.display = 'none';
                toast.style.opacity = '1'; 
            }, 500);
        }, 2500);

        loadSchedule(); // Re-rendering to update button 'disabled' states
    }

    function logout() { localStorage.removeItem('isLoggedIn'); window.location.href = 'index.html'; }
    loadSchedule();
</script>

<footer class="mt-5 pb-5">
    <div class="container">
        <hr class="border-secondary opacity-25 mb-5">
        <div class="row g-4">
            <div class="col-md-4 text-center text-md-start">
                <img src="images/thezenlogo.png" alt="Logo" style="height: 35px;" class="mb-3 opacity-75">
                <p class="small text-white-50 mb-1">
                    <a href="https://maps.app.goo.gl/4bjMF59gHk3gsZ4Z6"
                        target="_blank"
                        class="text-decoration-none text-beige hover-beige">
                        <i class="fa-solid fa-location-dot me-2 text-beige"></i>
                        The Zen, 123 Serenity Lane, Wellness District
                    </a>
                </p>
                <p class="small text-white-50">40150 Shah Alam, Selangor</p>
            </div>

            <div class="col-md-4 text-center">
                <h6 class="text-beige fw-bold mb-3">Quick Navigation</h6>
                <ul class="list-unstyled small">
                    <li class="mb-2"><a href="dashboard.html" class="text-white-50 text-decoration-none hover-beige">My Dashboard</a></li>
                    <li class="mb-2"><a href="register_class.html" class="text-white-50 text-decoration-none hover-beige">Book a Session</a></li>
                    <li class="mb-2"><a href="trainers.html" class="text-white-50 text-decoration-none hover-beige">Our Trainers</a></li>
                </ul>
            </div>

            <div class="col-md-4 text-center text-md-end">
                <h6 class="text-beige fw-bold mb-3">Follow Our Journey</h6>
                <div class="social-icons">
                    <a href="https://www.instagram.com/keenoah" target="_blank" class="text-white-50 mx-2 hover-beige"><i class="fa-brands fa-instagram fa-lg"></i></a>
                    <a href="https://www.facebook.com" target="_blank" class="text-white-50 mx-2 hover-beige"><i class="fa-brands fa-facebook fa-lg"></i></a>
                    <a href="https://youtube.com/@keenoah" target="_blank" class="text-white-50 mx-2 hover-beige"><i class="fa-brands fa-youtube fa-lg"></i></a>
                    <a href="https://www.tiktok.com/@keen0ah" target="_blank" class="text-white-50 mx-2 hover-beige"><i class="fa-brands fa-tiktok fa-lg"></i></a>
                </div>
                <p class="small text-white-50 mt-4">Â© 2025 THE ZEN Sanctuary.</p>
            </div>
        </div>
    </div>
    <p class="text-center small text-white-50 mt-3 px-3">
        Disclaimer: This website is an educational project created for the IMS566 assignment by Muhammad Haziq Hazwan and Nur Filzatul Najwa.
    </p>
</footer>
</body>
</html>